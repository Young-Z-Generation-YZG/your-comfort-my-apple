syntax = "proto3";

option csharp_namespace = "YGZ.Catalog.Api.Protos";

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";

package catalog;

enum ETenantClassificationGrpc
{
    TENANT_CLASSIFICATION_UNKNOWN = 0;
    TENANT_CLASSIFICATION_WAREHOUSE = 1;
    TENANT_CLASSIFICATION_BRANCH = 2;
}

enum ESkuStateGrpc
{
    SKU_STATE_UNKNOWN = 0;
    SKU_STATE_ACTIVE = 1;
    SKU_STATE_INACTIVE = 2;
}

enum ETenantTypeGrpc
{
    TENANT_TYPE_UNKNOWN = 0;
    TENANT_TYPE_WAREHOUSE = 1;
    TENANT_TYPE_BRANCH = 2;
}

enum ETenantStateGrpc
{
    TENANT_STATE_UNKNOWN = 0;
    TENANT_STATE_ACTIVE = 1;
    TENANT_STATE_INACTIVE = 2;
    TENANT_STATE_MAINTENANCE = 3;
}

enum EPromotionTypeGrpc
{
    PROMOTION_TYPE_UNKNOWN = 0;
    PROMOTION_TYPE_COUPON = 1;
    PROMOTION_TYPE_EVENT_ITEM = 2;
}

service CatalogProtoService {
    rpc CheckTenantExistGrpc (CheckTenantExistRequest) returns (BooleanResponse);

    // GET requests
    rpc GetTenantByIdGrpc (GetTenantByIdRequest) returns (TenantModel);
    rpc GetSkuByIdGrpc (GetSkuByIdRequest) returns (SkuModel);

    // POST requests
    rpc CheckInsufficientGrpc (CheckInsufficientRequest) returns (BooleanResponse);
    rpc DeductQuantityGrpc (DeductQuantityGrpcRequest) returns (BooleanResponse);
}


// models
message TenantModel
{
    google.protobuf.StringValue id = 1;
    google.protobuf.StringValue sub_domain = 2;
    google.protobuf.StringValue name = 3;
    google.protobuf.StringValue description = 4;
    ETenantTypeGrpc tenant_type = 5;
    ETenantStateGrpc tenant_state = 6;
}

message SkuModel
{
    google.protobuf.StringValue id = 1;
    google.protobuf.StringValue model_id = 2;
    google.protobuf.StringValue tenant_id = 3;
    google.protobuf.StringValue branch_id = 4;
    google.protobuf.StringValue sku_code = 5;
    google.protobuf.StringValue product_classification = 6;
    google.protobuf.StringValue normalized_model = 7;
    google.protobuf.StringValue normalized_storage = 8;
    google.protobuf.StringValue normalized_color = 9;
    google.protobuf.StringValue color_hex_code = 10;
    google.protobuf.DoubleValue unit_price = 11;
    google.protobuf.Int32Value available_in_stock = 12;
    google.protobuf.Int32Value total_sold = 13;
    ESkuStateGrpc sku_state = 14;
    google.protobuf.StringValue slug = 15;
    google.protobuf.Timestamp   created_at = 16;
    google.protobuf.Timestamp   updated_at = 17;
    google.protobuf.StringValue updated_by = 18;
    bool                        is_deleted = 19;
    google.protobuf.Timestamp   deleted_at = 20;
    google.protobuf.StringValue deleted_by = 21;
    ReservedForEventFieldModel       reserved_for_event = 22;
}

message ReservedForEventFieldModel
{
    google.protobuf.StringValue event_id = 1;
    google.protobuf.StringValue event_item_id = 2;
    google.protobuf.StringValue event_name = 3;
    google.protobuf.Int32Value  reserved_quantity = 4;
}


// GET requests
message GetTenantByIdRequest {
    google.protobuf.StringValue tenant_id = 1;
}

message GetSkuByIdRequest {
    google.protobuf.StringValue sku_id = 1;
}


// POST requests
message CheckTenantExistRequest {
    google.protobuf.StringValue tenant_id = 1;
}

message CheckInsufficientRequest {
    google.protobuf.StringValue sku_id = 1;
    google.protobuf.Int32Value quantity = 2;
    google.protobuf.StringValue promotion_id = 3;
    EPromotionTypeGrpc promotion_type = 4;
}


message DeductQuantityGrpcRequest {
    google.protobuf.StringValue sku_id = 1;
    google.protobuf.Int32Value quantity = 2;
    google.protobuf.StringValue promotion_id = 3;
    EPromotionTypeGrpc promotion_type = 4;
}


// responses
message BooleanResponse {
	bool is_success = 1;
}
