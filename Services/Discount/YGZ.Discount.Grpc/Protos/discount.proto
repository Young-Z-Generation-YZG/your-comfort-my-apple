syntax = "proto3";

option csharp_namespace = "YGZ.Discount.Grpc.Protos";

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";

package discount;

enum EProductClassificationGrpc {
	PRODUCT_CLASSIFICATION_UNKNOWN = 0;
	PRODUCT_CLASSIFICATION_IPHONE = 1;
	PRODUCT_CLASSIFICATION_IPAD = 2;
	PRODUCT_CLASSIFICATION_MACBOOK = 3;
	PRODUCT_CLASSIFICATION_WATCH = 4;
	PRODUCT_CLASSIFICATION_HEADPHONE = 5;
	PRODUCT_CLASSIFICATION_ACCESSORY = 6;
}

enum EDiscountStateGrpc {
	DISCOUNT_STATE_UNKNOWN = 0; 
	DISCOUNT_STATE_ACTIVE = 1; 
	DISCOUNT_STATE_INACTIVE = 2;
	DISCOUNT_STATE_EXPIRED = 3;
}

enum EDiscountTypeGrpc {
    DISCOUNT_TYPE_UNKNOWN = 0;
    DISCOUNT_TYPE_PERCENTAGE = 1;
    DISCOUNT_TYPE_FIXED = 2;
}

service DiscountProtoService {
    // POST requests
    rpc CreateEventGrpc (CreateEventRequest) returns (BooleanResponse);
    rpc AddEventItemsGrpc (AddEventItemsRequest) returns (BooleanResponse);
    rpc CreateCouponGrpc (CreateCouponRequest)  returns (BooleanResponse);
    rpc UseCouponGrpc (UseCouponRequest) returns (BooleanResponse);

    // GET requests
    rpc GetCouponByCodeGrpc (GetCouponByCodeRequest) returns (CouponModel);
    rpc GetCouponsGrpc (GetCouponsRequest) returns (GetCouponsResponse);

    // 15/11/2025
    rpc GetEventsGrpc (GetEventsGrpcRequest) returns (ListEventResponse);
    rpc GetEventDetailsGrpc (GetEventDetailsGrpcRequest) returns (EventResponse);

    rpc GetEventWithEventItemsGrpc (GetEventWithEventItemsRequest) returns (GetEventWithEventItemsResponse);   
    rpc GetEventItemByIdGrpc (GetEventItemByIdRequest) returns (EventItemModel);
}

// models

message CouponModel {
    google.protobuf.StringValue id = 1;
    google.protobuf.StringValue user_id = 2;
    google.protobuf.StringValue code = 3;
    google.protobuf.StringValue title = 4;
    google.protobuf.StringValue description = 5;
    EProductClassificationGrpc category_type = 6;
    EDiscountTypeGrpc discount_type = 7;
    google.protobuf.DoubleValue discount_value = 8;
    google.protobuf.DoubleValue max_discount_amount = 9;
    google.protobuf.Int32Value available_quantity = 10;
    google.protobuf.Int32Value stock = 11;
}

message EventModel {
    google.protobuf.StringValue id = 1;
    google.protobuf.StringValue title = 2;
    google.protobuf.StringValue description = 3;
    google.protobuf.Timestamp   start_date = 4;
    google.protobuf.Timestamp   end_date = 5;
    google.protobuf.Timestamp   created_at = 6;
    google.protobuf.Timestamp   updated_at = 7;
    google.protobuf.StringValue updated_by = 8;
    bool                        is_deleted = 9;
    google.protobuf.Timestamp   deleted_at = 10;
    google.protobuf.StringValue deleted_by = 11;
}

message EventItemModel {
    google.protobuf.StringValue id = 1;
    google.protobuf.StringValue event_id = 2;
    google.protobuf.StringValue sku_id = 3;
    google.protobuf.StringValue tenant_id = 4;
    google.protobuf.StringValue branch_id = 5;
    ModelValueObject model = 6;
    ColorValueObject color = 7;
    StorageValueObject storage = 8;
    google.protobuf.StringValue display_image_url = 9;
    EProductClassificationGrpc product_classification = 10;
    EDiscountTypeGrpc discount_type = 11;
    google.protobuf.DoubleValue discount_value = 12;
    google.protobuf.DoubleValue original_price = 13;
    google.protobuf.Int32Value stock = 14;
    google.protobuf.Int32Value Sold = 15;
    google.protobuf.Timestamp   created_at = 16;
    google.protobuf.Timestamp   updated_at = 17;
    google.protobuf.StringValue updated_by = 18;
    bool                        is_deleted = 19;
    google.protobuf.Timestamp   deleted_at = 20;
    google.protobuf.StringValue deleted_by = 21;
}



// POST requests

message CreateCouponRequest {
    google.protobuf.StringValue user_id = 1;
    google.protobuf.StringValue unique_code = 2;
    google.protobuf.StringValue title = 3;
    google.protobuf.StringValue description = 4;
    EProductClassificationGrpc category_type = 5;
    EDiscountTypeGrpc discount_type = 6;
    google.protobuf.DoubleValue discount_value = 7;
    google.protobuf.DoubleValue max_discount_amount = 8;
    google.protobuf.Int32Value available_quantity = 9;
    google.protobuf.Int32Value stock = 10;
}

message CreateEventRequest {
    google.protobuf.StringValue title = 1;
    google.protobuf.StringValue description = 2;
    google.protobuf.Timestamp start_date = 3;
    google.protobuf.Timestamp end_date = 4;
}

message AddEventItemsRequest {
    google.protobuf.StringValue event_id = 1;
    repeated EventItemModel event_items = 2;
}

message UseCouponRequest {
    google.protobuf.StringValue coupon_id = 1;
}


// GET requests
message GetEventWithEventItemsRequest {}

message GetEventsGrpcRequest {}
message GetEventDetailsGrpcRequest {
    google.protobuf.StringValue event_id = 1;
}

message GetEventItemByIdRequest {
    google.protobuf.StringValue event_item_id = 1;
}

message GetCouponsRequest {}

message GetCouponByCodeRequest {
    google.protobuf.StringValue coupon_code = 1;
}

// value objects

message ModelValueObject {
    google.protobuf.StringValue name = 1;
    google.protobuf.StringValue normalized_name = 2;
}

message ColorValueObject {
    google.protobuf.StringValue name = 1;
    google.protobuf.StringValue normalized_name = 2;
    google.protobuf.StringValue hex_code = 3;
}

message StorageValueObject {
    google.protobuf.StringValue name = 1;
    google.protobuf.StringValue normalized_name = 2;
}



// responses
message GetEventWithEventItemsResponse {
    EventModel event = 1;
    repeated EventItemModel event_items = 2;
}

message BooleanResponse {
	bool is_success = 1;
}

message GetCouponsResponse {
    repeated CouponModel coupons = 1;   
}

message EventResponse {
    EventModel event_model = 1;
    repeated EventItemModel event_item_models = 2;
}

message ListEventResponse {
    repeated EventResponse event_responses = 1;
}