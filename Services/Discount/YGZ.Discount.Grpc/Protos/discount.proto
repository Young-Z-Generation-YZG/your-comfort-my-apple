syntax = "proto3";

option csharp_namespace = "YGZ.Discount.Grpc.Protos";

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";

package discount;

// Enums for DiscountTypeEnum and DiscountStateEnum
enum TypeEnum {
  DISCOUNT_TYPE_ENUM_UNKNOWN = 0; // Default/unknown value
  PERCENT = 1;
  FIXED = 2; // Assuming FIXED is another possible value; adjust as needed
}

enum StateEnum {
  DISCOUNT_STATE_ENUM_UNKNOWN = 0; // Default/unknown value
  ACTIVE = 1; // Assuming ACTIVE is another possible value; adjust as needed
  INACTIVE = 2;
  EXPIRED = 3;
}

enum NameTagEnum {
  NAME_TAG_ENUM_UNKNOWN = 0; // Default/unknown value
  MACBOOK = 1;
  IPAD = 2;
  IPHONE = 3;
  WATCH = 4;
  HEADPHONE = 5;
  ACCESSORY = 6;
}

service DiscountProtoService {
	rpc GetAllDiscounts (GetAllDiscountsRequest) returns (GetAllDiscountsResponse);
	rpc GetDiscountByCode (GetDiscountRequest) returns (CouponResponse);
	rpc CreateDiscount (CreateDiscountRequest) returns (BooleanResponse);
	rpc UpdateDiscount (UpdateDiscountRequest) returns (BooleanResponse);
	rpc DeleteDiscount (DeleteDiscountRequest) returns (BooleanResponse);
}

// Coupon message definition
message CouponModel {
  google.protobuf.StringValue title = 1;
  google.protobuf.StringValue description = 2;
  StateEnum state = 3; // Enum for discount status
  NameTagEnum product_name_tag = 4; 
  TypeEnum type = 5; // Enum for discount type
  double discount_value = 6;
  google.protobuf.DoubleValue min_purchase_amount = 7;
  google.protobuf.DoubleValue max_discount_amount = 8;
  google.protobuf.Timestamp valid_from = 9;
  google.protobuf.Timestamp valid_to = 10;
  int32 available_quantity = 11;
}

message GetDiscountRequest {
	string code = 1;
}

message CouponResponse {
  CouponModel coupon = 1; // Return the full coupon model
}

message CreateDiscountRequest {
  CouponModel coupon = 1; // Full coupon details to create
}

message UpdateDiscountRequest {
  string code = 1; // CouponId as string (assuming CouponId is a string or GUID in your domain)
  CouponModel coupon = 2; // Full coupon details to update
}

message DeleteDiscountRequest {
  string code = 1;
}

message BooleanResponse {
	bool is_success = 1;
}

// Request and Response messages for GetAllDiscounts
message GetAllDiscountsRequest {
  StateEnum state = 1;
  int32 _page = 2;
  int32 _limit = 3;
}

message GetAllDiscountsResponse {
  int32 total_count = 2;
  int32 total_pages = 3;
  repeated CouponModel coupons = 1; // List of coupons
}