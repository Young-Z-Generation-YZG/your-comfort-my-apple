syntax = "proto3";

option csharp_namespace = "YGZ.Discount.Grpc.Protos";

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";

package discount;

enum EProductType {
	PRODUCT_TYPE_UNKNOWN = 0;
	PRODUCT_TYPE_IPHONE = 1;
	PRODUCT_TYPE_IPAD = 2;
	PRODUCT_TYPE_MACBOOK = 3;
	PRODUCT_TYPE_WATCH = 4;
	PRODUCT_TYPE_HEADPHONE = 5;
	PRODUCT_TYPE_ACCESSORY = 6;
}

enum EDiscountState {
	DISCOUNT_STATE_UNKNOWN = 0; 
	DISCOUNT_STATE_ACTIVE = 1; 
	DISCOUNT_STATE_INACTIVE = 2;
	DISCOUNT_STATE_EXPIRED = 3;
}

enum EDiscountType {
    DISCOUNT_TYPE_UNKNOWN = 0;
    DISCOUNT_TYPE_PERCENTAGE = 1;
    DISCOUNT_TYPE_FIXED = 2;
}

service DiscountProtoService {
	// rpc GetDiscountByCode (GetDiscountRequest) returns (CouponResponse);
	// rpc GetAllPromotionCoupons (GetAllPromotionCouponsRequest) returns (GetAllDiscountsResponse);
	// rpc GetPromotionEvent (GetPromotionEventRequest) returns (PromotionEventResponse);
	// rpc GetPromotionItems (GetPromotionItemsRequest) returns (PromotionItemsRepsonse);
	// rpc GetPromotionItemById (GetPromotionItemByIdRequest) returns (PromotionItemModel);

	// rpc UpdateDiscountCoupon (UpdateDiscountCouponRequest) returns (BooleanResponse);
	// rpc DeleteDiscountCoupon (DeleteDiscountCouponRequest) returns (BooleanResponse);

	// rpc CreatePromotionItem (CreatePromotionItemModelRequest) returns (BooleanResponse);

	// rpc CreatePromotionCoupon (CreatePromotionCouponModel) returns (BooleanResponse);
	// rpc CreatePromotionEvent (CreatePromotionEventModelRequest) returns (BooleanResponse);
	// rpc CreatePromotionGlobal (PromotionGlobalModelRequest) returns (BooleanResponse);
	// rpc CreatePromotionCategory (PromotionCategoryModelRequest) returns (BooleanResponse);
	// rpc CreatePromotionProduct (PromotionProductModelRequest) returns (BooleanResponse);

    // POST requests
    rpc CreateEventGrpc (CreateEventRequest) returns (BooleanResponse);
    rpc AddEventItemsGrpc (AddEventItemsRequest) returns (BooleanResponse);

    // GET requests
    rpc GetEventWithEventItemsGrpc (GetEventWithEventItemsRequest) returns (GetEventWithEventItemsResponse);   
    rpc GetEventItemByIdGrpc (GetEventItemByIdRequest) returns (EventItemModel);
}

// models

message EventModel {
    google.protobuf.StringValue id = 1;
    google.protobuf.StringValue title = 2;
    google.protobuf.StringValue description = 3;
    google.protobuf.Timestamp start_date = 4;
    google.protobuf.Timestamp end_date = 5;
}

message EventItemModel {
    google.protobuf.StringValue id = 1;
    ModelValueObject model = 2;
    ColorValueObject color = 3;
    StorageValueObject storage = 4;
    google.protobuf.StringValue display_image_url = 5;
    EProductType product_type = 6;
    EDiscountType discount_type = 7;
    google.protobuf.DoubleValue discount_value = 8;
    google.protobuf.DoubleValue original_price = 9;
    google.protobuf.Int32Value stock = 10;
    google.protobuf.Int32Value Sold = 11;
}



// POST requests

message CreateEventRequest {
    google.protobuf.StringValue title = 1;
    google.protobuf.StringValue description = 2;
    google.protobuf.Timestamp start_date = 3;
    google.protobuf.Timestamp end_date = 4;
}

message AddEventItemsRequest {
    google.protobuf.StringValue event_id = 1;
    repeated EventItemModel event_items = 2;
}

// GET requests
message GetEventWithEventItemsRequest {}
message GetEventItemByIdRequest {
    google.protobuf.StringValue event_item_id = 1;
}



// value objects

message ModelValueObject {
    google.protobuf.StringValue name = 1;
    google.protobuf.StringValue normalized_name = 2;
}

message ColorValueObject {
    google.protobuf.StringValue name = 1;
    google.protobuf.StringValue normalized_name = 2;
    google.protobuf.StringValue hex_code = 3;
}

message StorageValueObject {
    google.protobuf.StringValue name = 1;
    google.protobuf.StringValue normalized_name = 2;
}



// responses

message GetEventWithEventItemsResponse {
    EventModel event = 1;
    repeated EventItemModel event_items = 2;
}

message BooleanResponse {
	bool is_success = 1;
}
